## Hazelcast image version
## ref: https://hub.docker.com/r/hazelcast/hazelcast-kubernetes/tags/
##
image:
  # repository is the Hazelcast image name
  repository: "hazelcast/hazelcast-enterprise-kubernetes"
  # tag is the Hazelcast image tag
  tag: "3.10.2"
  # pullPolicy is the Docker image pull policy
  # It's recommended to change this to 'Always' if the image tag is 'latest'
  # ref: http://kubernetes.io/docs/user-guide/images/#updating-images
  #
  pullPolicy: IfNotPresent
  # pullSecrets is an array of docker-registry secret names
  # Secrets must be manually created in the namespace.
  # ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
  # pullSecrets:
  #   - myRegistryKeySecretName

# Cluster settings
cluster:
  # memberCount is the number Hazelcast members
  memberCount: 2

# Hazelcast properties
hazelcast:
  # rest is a flag used to enable REST endpoints for Hazelcast member
  rest: true
  # javaOpts are additional JAVA_OPTS properties for Hazelcast member
  javaOpts:
  # licenseKey is the Hazelcast Enterprise License Key that is required to run the node
  licenseKey:
  hotRestart:
    # enabled decides whether the Hot Restart feature is enabled
    enabled: true
    # parallelism is the level of parallelism in Hot Restart Persistence (number of I/O threads)
    parallelism: 1
    # validationTimeoutSeconds is the timeout for the Hot Restart process when validating the cluster members and partitioning tables
    validationTimeoutSeconds: 120
    # dataLoadTimeoutSeconds is is the data load timeout for the Hot Restart process
    dataLoadTimeoutSeconds: 900
    # clusterDataRecoveryPolicy is the recovery policy: FULL_RECOVERY_ONLY, PARTIAL_RECOVERY_MOST_RECENT, or PARTIAL_RECOVERY_MOST_COMPLETE
    clusterDataRecoveryPolicy: FULL_RECOVERY_ONLY
    # maps is a list of maps for which the Hot Restart process is enabled
    maps:
      # name is the name of the map
      - name: test-map
      # fsync guarantees that data is persisted to the disk device when a write operation returns successful response to the caller
        fsync: true
    # caches is a list of caches for which the Hot Restart process is enabled
    caches:
      # name is the name of the cache
      # - name: test-cache
      # fsync guarantees that data is persisted to the disk device when a write operation returns successful response to the caller
      # fsync: false



  # configurationFiles are Hazelcast configuration files    
  # configurationFiles:
  #   hazelcast.xml: |-

persistence:
  enabled: true
  # existingClaim: true
  accessModes:
  - ReadWriteOnce
  size: 8Gi

# nodeSelector is an array of Hazelcast Node labels for POD assignments
# ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector
nodeSelector: {}

# Hazelcast Liveness probe
livenessProbe:
  # enabled is a flag to used to enable liveness probe
  enabled: true
  # initialDelaySeconds is a delay before liveness probe is initiated
  initialDelaySeconds: 30
  # periodSeconds decides how often to perform the probe
  periodSeconds: 10
  # timeoutSeconds decides when the probe times out
  timeoutSeconds: 5
  # successThreshold is the minimum consecutive successes for the probe to be considered successful after having failed
  successThreshold: 1
  # failureThreshold is the minimum consecutive failures for the probe to be considered failed after having succeeded
  failureThreshold: 3

# Hazelcast Readiness probe
readinessProbe:
  # enabled is a flag to used to enable readiness probe
  enabled: true
  # initialDelaySeconds is a delay before readiness probe is initiated
  initialDelaySeconds: 30
  # periodSeconds decides how often to perform the probe
  periodSeconds: 10
  # timeoutSeconds decides when the probe times out
  timeoutSeconds: 1
  # successThreshold is the minimum consecutive successes for the probe to be considered successful after having failed
  successThreshold: 1
  # failureThreshold is the minimum consecutive failures for the probe to be considered failed after having succeeded
  failureThreshold: 3

# Configure resource requests and limits
# ref: http://kubernetes.io/docs/user-guide/compute-resources/
#
resources:
  requests:
    memory: 256Mi
    cpu: 100m

# Hazelcast Service properties
service:
  # type defines the Kubernetes service type ('ClusterIP', 'LoadBalancer', or 'NodePort')
  type: ClusterIP
  # port is the Kubernetes service port
  port: 5701

# Role-based Access Control
rbac:
  # create is a flag which enables installing RBAC Role authorization
  create: true
